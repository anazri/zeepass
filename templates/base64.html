<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 Encoder/Decoder - ZeePass</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-gentle': 'pulseGentle 2s ease-in-out infinite',
                        'spin-slow': 'spin 2s linear infinite',
                        'bounce-soft': 'bounceSoft 1s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .dark .gradient-bg {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }
        .sidebar-active {
            background: rgba(99, 102, 241, 0.1);
            border-right: 3px solid #6366f1;
        }
        .dark .sidebar-active {
            background: rgba(99, 102, 241, 0.2);
        }
        .tab-active {
            background-color: #6366f1;
            color: white;
        }
        .dark .tab-active {
            background-color: #4f46e5;
        }
        .tab-inactive {
            background-color: transparent;
            color: #6366f1;
        }
        .dark .tab-inactive {
            color: #818cf8;
            border-color: #4f46e5;
        }
        .drag-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        .dark .drag-area {
            border-color: #4b5563;
        }
        .drag-area.drag-over {
            border-color: #6366f1;
            background-color: rgba(99, 102, 241, 0.05);
        }
        .dark .drag-area.drag-over {
            background-color: rgba(99, 102, 241, 0.1);
        }
        .theme-transition {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        .code-display {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes pulseGentle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        @keyframes bounceSoft {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .processing-spinner {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #6366f1;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        .dark .processing-spinner {
            border-color: #374151;
            border-top-color: #818cf8;
        }

        /* Skeleton loading animations */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        .dark .skeleton {
            background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .stats-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        }
        .dark .stats-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
        }
        .success-animation {
            animation: bounceSoft 0.6s ease-in-out;
        }
        .error-shake {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 theme-transition">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <a href="/" class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-white rounded flex items-center justify-center">
                        <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h1 class="text-xl font-bold">ZeePass</h1>
                </a>
            </div>
            
            <!-- Breadcrumb -->
            <nav class="hidden md:flex text-sm text-blue-200">
                <a href="/" class="hover:text-white transition">Home</a>
                <span class="mx-2">â€¢</span>
                <span class="text-white">Base64</span>
            </nav>
            
            <div class="flex items-center space-x-2">
                <!-- Dark Mode Toggle -->
                <button id="themeToggle" class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition theme-transition" title="Toggle dark mode">
                    <svg id="sunIcon" class="w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
                    </svg>
                    <svg id="moonIcon" class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                    </svg>
                </button>
                <button class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white dark:bg-gray-800 shadow-lg theme-transition">
            <nav class="py-4">
                <a href="/text-encryption" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                        <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h2a2 2 0 002-2V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                    </svg>
                    <span>Text Encryption</span>
                </a>
                
                <a href="/file-encryption" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                    <span>File Encryption</span>
                </a>
                
                <a href="/chat-encryption" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"/>
                        <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"/>
                    </svg>
                    <span>Chat Encryption</span>
                </a>
                
                <a href="/password-generator" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span>Password</span>
                </a>
                
                <a href="/ssh-key" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z" clip-rule="evenodd"/>
                    </svg>
                    <span>SSH Key</span>
                </a>
                
                <a href="/base64" class="flex items-center space-x-3 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sidebar-active theme-transition">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Base64</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-8 theme-transition">
            <div class="max-w-6xl mx-auto">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-200 mb-2 theme-transition">Base64 Encoder/Decoder</h2>
                    <p class="text-gray-600 dark:text-gray-400 theme-transition">Encode and decode Base64 data with real-time conversion and drag-and-drop file support</p>
                </div>

                <!-- Statistics Cards -->
                <div id="statsContainer" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 hidden">
                    <div class="stats-card rounded-lg p-4 border border-gray-200 dark:border-gray-600 theme-transition">
                        <div class="text-sm text-gray-600 dark:text-gray-400">Input Characters</div>
                        <div id="inputChars" class="text-2xl font-bold text-gray-800 dark:text-gray-200">0</div>
                    </div>
                    <div class="stats-card rounded-lg p-4 border border-gray-200 dark:border-gray-600 theme-transition">
                        <div class="text-sm text-gray-600 dark:text-gray-400">Output Characters</div>
                        <div id="outputChars" class="text-2xl font-bold text-gray-800 dark:text-gray-200">0</div>
                    </div>
                    <div class="stats-card rounded-lg p-4 border border-gray-200 dark:border-gray-600 theme-transition">
                        <div class="text-sm text-gray-600 dark:text-gray-400">Data Size</div>
                        <div id="dataSize" class="text-2xl font-bold text-gray-800 dark:text-gray-200">0 B</div>
                    </div>
                    <div class="stats-card rounded-lg p-4 border border-gray-200 dark:border-gray-600 theme-transition">
                        <div class="text-sm text-gray-600 dark:text-gray-400">Efficiency</div>
                        <div id="efficiency" class="text-2xl font-bold text-gray-800 dark:text-gray-200">100%</div>
                    </div>
                </div>

                <!-- Main Converter Interface -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 theme-transition">
                    <!-- Header with Tabs -->
                    <div class="border-b border-gray-200 dark:border-gray-600 p-4 flex justify-between items-center theme-transition">
                        <div class="flex space-x-1">
                            <button id="encodeTab" class="px-6 py-2 rounded-lg border border-indigo-500 tab-active transition theme-transition">
                                <span class="flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    <span>Encode</span>
                                </span>
                            </button>
                            <button id="decodeTab" class="px-6 py-2 rounded-lg border border-indigo-500 tab-inactive transition theme-transition">
                                <span class="flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2h8v11H4V4zm2 3a1 1 0 011-1h2a1 1 0 110 2H7a1 1 0 01-1-1zm0 3a1 1 0 011-1h2a1 1 0 110 2H7a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    <span>Decode</span>
                                </span>
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 theme-transition">Mode</label>
                            <select id="dataType" class="px-3 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none text-sm theme-transition">
                                <option value="text">Text</option>
                                <option value="file">File</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Full Width Layout -->
                        <div class="space-y-8">
                            <!-- Input Section -->
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <label id="inputLabel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 theme-transition">Input Text</label>
                                    <div id="inputValidation" class="text-xs hidden"></div>
                                </div>

                                <!-- Text Input Section -->
                                <div id="textSection">
                                    <div class="relative">
                                        <textarea 
                                            id="textInput" 
                                            rows="8" 
                                            placeholder="Enter text to encode..."
                                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none theme-transition"
                                        ></textarea>
                                        <div id="inputProgress" class="absolute top-2 right-2 hidden">
                                            <div class="processing-spinner"></div>
                                        </div>
                                        <!-- Input Skeleton -->
                                        <div id="inputSkeleton" class="hidden absolute inset-0 p-3 space-y-2">
                                            <div class="skeleton rounded h-4 w-full"></div>
                                            <div class="skeleton rounded h-4 w-4/5"></div>
                                            <div class="skeleton rounded h-4 w-3/4"></div>
                                            <div class="skeleton rounded h-4 w-5/6"></div>
                                            <div class="skeleton rounded h-4 w-2/3"></div>
                                            <div class="skeleton rounded h-4 w-3/5"></div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <div class="flex space-x-2">
                                            <button id="pasteBtn" class="inline-flex items-center space-x-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded hover:bg-indigo-200 dark:hover:bg-indigo-800 transition text-sm theme-transition">
                                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"/>
                                                    <path d="M3 5a2 2 0 012-2 3 3 0 003 3h6a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"/>
                                                </svg>
                                                <span>Paste</span>
                                            </button>
                                            <button id="clearInputBtn" class="inline-flex items-center space-x-2 px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800 transition text-sm theme-transition">
                                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                                </svg>
                                                <span>Clear</span>
                                            </button>
                                        </div>
                                        <div class="text-xs text-gray-500 dark:text-gray-400" id="inputCharCount">0 characters</div>
                                    </div>
                                </div>

                                <!-- File Input Section -->
                                <div id="fileSection" class="hidden">
                                    <div id="dropArea" class="drag-area rounded-lg p-8 text-center bg-gray-50 dark:bg-gray-700 theme-transition">
                                        <div id="uploadContent">
                                            <div class="w-12 h-12 mx-auto mb-4 text-gray-400 dark:text-gray-500">
                                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                                </svg>
                                            </div>
                                            <p class="text-gray-600 dark:text-gray-400 mb-2">Drag and drop files here or click to browse</p>
                                            <input type="file" id="fileInput" class="hidden">
                                            <button type="button" id="uploadBtn" class="mt-2 px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded hover:bg-indigo-200 dark:hover:bg-indigo-800 transition theme-transition">
                                                <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                                </svg>
                                                Upload File
                                            </button>
                                        </div>
                                        <div id="filePreview" class="hidden">
                                            <div class="bg-gray-100 dark:bg-gray-600 rounded-lg p-4 mx-auto max-w-xs theme-transition">
                                                <div class="text-center">
                                                    <div class="w-12 h-12 mx-auto mb-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center">
                                                        <svg class="w-6 h-6 text-indigo-600 dark:text-indigo-400" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/>
                                                        </svg>
                                                    </div>
                                                    <p id="fileName" class="text-sm font-medium text-gray-800 dark:text-gray-200"></p>
                                                    <p id="fileSize" class="text-xs text-gray-500 dark:text-gray-400"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="fileProgress" class="hidden mt-4">
                                            <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                                <div id="progressBar" class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                            </div>
                                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Processing file...</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-start space-x-2 mt-2">
                                        <button id="clearFileBtn" class="inline-flex items-center space-x-2 px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800 transition text-sm theme-transition">
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                            <span>Clear</span>
                                        </button>
                                    </div>
                                </div>
                            </div>


                            <!-- Output Section -->
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <label id="outputLabel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 theme-transition">Output (Base64)</label>
                                    <div id="outputValidation" class="text-xs hidden"></div>
                                </div>
                                <div class="relative">
                                    <textarea 
                                        id="outputArea" 
                                        rows="8" 
                                        readonly
                                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg resize-none code-display theme-transition"
                                        placeholder="Output will appear here..."
                                    ></textarea>
                                    <div id="outputProgress" class="absolute top-2 right-2 hidden">
                                        <div class="processing-spinner"></div>
                                    </div>
                                    <!-- Output Skeleton -->
                                    <div id="outputSkeleton" class="hidden absolute inset-0 p-3 space-y-2">
                                        <div class="skeleton rounded h-4 w-full"></div>
                                        <div class="skeleton rounded h-4 w-5/6"></div>
                                        <div class="skeleton rounded h-4 w-4/5"></div>
                                        <div class="skeleton rounded h-4 w-full"></div>
                                        <div class="skeleton rounded h-4 w-3/4"></div>
                                        <div class="skeleton rounded h-4 w-2/3"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex space-x-2">
                                        <button id="copyBtn" class="inline-flex items-center space-x-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded hover:bg-indigo-200 dark:hover:bg-indigo-800 transition text-sm theme-transition">
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"/>
                                                <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"/>
                                            </svg>
                                            <span>Copy</span>
                                        </button>
                                        <button id="clearOutputBtn" class="inline-flex items-center space-x-2 px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800 transition text-sm theme-transition">
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                            <span>Clear</span>
                                        </button>
                                    </div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400" id="outputCharCount">0 characters</div>
                                </div>
                            </div>
                        </div>

                        <!-- Error/Success Messages -->
                        <div id="messageArea" class="mt-4 hidden">
                            <div id="errorMessage" class="bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg hidden theme-transition">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    <span id="errorText">Error message</span>
                                </div>
                            </div>
                            <div id="successMessage" class="bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-300 px-4 py-3 rounded-lg hidden theme-transition">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    <span id="successText">Success message</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 dark:bg-gray-900 text-white py-6 mt-12 theme-transition">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm text-gray-300 dark:text-gray-400 mb-2">Â© 2024 Moonkite Labs Sdn. Bhd. - Professional IT & Security Solutions</p>
            <p class="text-xs text-gray-400 dark:text-gray-500">Founded by <a href="https://www.linkedin.com/in/nazri-bin-abdullah-a75b40268/" class="hover:text-gray-200 dark:hover:text-gray-300 underline" target="_blank">Nazri Abdullah</a>, Senior Software Engineer & Cybersecurity Expert</p>
        </div>
    </footer>

    <script>
        // Theme Management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.classList.add('dark');
                updateThemeIcons(true);
            } else {
                document.documentElement.classList.remove('dark');
                updateThemeIcons(false);
            }
        }

        function toggleTheme() {
            const isDark = document.documentElement.classList.contains('dark');
            
            if (isDark) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateThemeIcons(false);
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateThemeIcons(true);
            }
        }

        function updateThemeIcons(isDark) {
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            
            if (isDark) {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        }

        // Initialize theme on load
        document.addEventListener('DOMContentLoaded', initTheme);
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        // Base64 Functionality
        class Base64Converter {
            constructor() {
                this.initElements();
                this.initEventListeners();
                this.currentMode = 'encode';
                this.currentDataType = 'text';
                this.selectedFile = null;
                this.debounceTimer = null;
                
                this.updateUI();
            }

            initElements() {
                // Tab elements
                this.encodeTab = document.getElementById('encodeTab');
                this.decodeTab = document.getElementById('decodeTab');
                
                // Input/Output elements
                this.textInput = document.getElementById('textInput');
                this.outputArea = document.getElementById('outputArea');
                this.dataType = document.getElementById('dataType');
                
                // Section elements
                this.textSection = document.getElementById('textSection');
                this.fileSection = document.getElementById('fileSection');
                
                // File elements
                this.fileInput = document.getElementById('fileInput');
                this.dropArea = document.getElementById('dropArea');
                this.uploadContent = document.getElementById('uploadContent');
                this.filePreview = document.getElementById('filePreview');
                this.fileName = document.getElementById('fileName');
                this.fileSize = document.getElementById('fileSize');
                this.fileProgress = document.getElementById('fileProgress');
                this.progressBar = document.getElementById('progressBar');
                
                // Button elements
                this.pasteBtn = document.getElementById('pasteBtn');
                this.copyBtn = document.getElementById('copyBtn');
                this.clearInputBtn = document.getElementById('clearInputBtn');
                this.clearOutputBtn = document.getElementById('clearOutputBtn');
                this.clearFileBtn = document.getElementById('clearFileBtn');
                this.uploadBtn = document.getElementById('uploadBtn');
                
                // UI elements
                this.inputLabel = document.getElementById('inputLabel');
                this.outputLabel = document.getElementById('outputLabel');
                this.inputValidation = document.getElementById('inputValidation');
                this.outputValidation = document.getElementById('outputValidation');
                this.inputCharCount = document.getElementById('inputCharCount');
                this.outputCharCount = document.getElementById('outputCharCount');
                
                // Statistics elements
                this.statsContainer = document.getElementById('statsContainer');
                this.inputChars = document.getElementById('inputChars');
                this.outputChars = document.getElementById('outputChars');
                this.dataSize = document.getElementById('dataSize');
                this.efficiency = document.getElementById('efficiency');
                
                // Message elements
                this.messageArea = document.getElementById('messageArea');
                this.errorMessage = document.getElementById('errorMessage');
                this.successMessage = document.getElementById('successMessage');
                this.errorText = document.getElementById('errorText');
                this.successText = document.getElementById('successText');
                
                // Progress elements
                this.inputProgress = document.getElementById('inputProgress');
                this.outputProgress = document.getElementById('outputProgress');
            }

            initEventListeners() {
                // Tab switching
                this.encodeTab.addEventListener('click', () => this.switchMode('encode'));
                this.decodeTab.addEventListener('click', () => this.switchMode('decode'));
                
                // Data type switching
                this.dataType.addEventListener('change', (e) => this.switchDataType(e.target.value));
                
                // Real-time text processing
                this.textInput.addEventListener('input', () => this.handleTextInput());
                
                // File handling
                this.uploadBtn.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e.target.files[0]));
                
                // Drag and drop
                this.dropArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                this.dropArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                this.dropArea.addEventListener('drop', (e) => this.handleDrop(e));
                
                // Button actions
                this.pasteBtn.addEventListener('click', () => this.pasteText());
                this.copyBtn.addEventListener('click', () => this.copyOutput());
                this.clearInputBtn.addEventListener('click', () => this.clearInput());
                this.clearOutputBtn.addEventListener('click', () => this.clearOutput());
                this.clearFileBtn.addEventListener('click', () => this.clearFile());
            }

            switchMode(mode) {
                this.currentMode = mode;
                this.updateTabs();
                this.updateLabels();
                this.validateAndProcess();
            }

            switchDataType(type) {
                this.currentDataType = type;
                this.updateSections();
                this.clearInput();
                this.clearOutput();
            }

            updateTabs() {
                if (this.currentMode === 'encode') {
                    this.encodeTab.className = 'px-6 py-2 rounded-lg border border-indigo-500 tab-active transition theme-transition';
                    this.decodeTab.className = 'px-6 py-2 rounded-lg border border-indigo-500 tab-inactive transition theme-transition';
                } else {
                    this.encodeTab.className = 'px-6 py-2 rounded-lg border border-indigo-500 tab-inactive transition theme-transition';
                    this.decodeTab.className = 'px-6 py-2 rounded-lg border border-indigo-500 tab-active transition theme-transition';
                }
            }

            updateLabels() {
                if (this.currentMode === 'encode') {
                    this.inputLabel.textContent = this.currentDataType === 'text' ? 'Input Text' : 'Input File';
                    this.outputLabel.textContent = 'Output (Base64)';
                    this.textInput.placeholder = 'Enter text to encode...';
                    this.outputArea.placeholder = 'Base64 output will appear here...';
                } else {
                    this.inputLabel.textContent = this.currentDataType === 'text' ? 'Input (Base64)' : 'Base64 File';
                    this.outputLabel.textContent = 'Output Text';
                    this.textInput.placeholder = 'Enter Base64 to decode...';
                    this.outputArea.placeholder = 'Decoded output will appear here...';
                }
            }

            updateSections() {
                if (this.currentDataType === 'text') {
                    this.textSection.classList.remove('hidden');
                    this.fileSection.classList.add('hidden');
                } else {
                    this.textSection.classList.add('hidden');
                    this.fileSection.classList.remove('hidden');
                }
            }

            updateUI() {
                this.updateTabs();
                this.updateLabels();
                this.updateSections();
            }

            handleTextInput() {
                clearTimeout(this.debounceTimer);
                this.debounceTimer = setTimeout(() => {
                    this.validateAndProcess();
                    this.updateCharacterCounts();
                    this.updateStatistics();
                }, 300);
            }

            validateAndProcess() {
                const input = this.textInput.value.trim();
                
                if (!input) {
                    this.clearOutput();
                    this.hideMessages();
                    return;
                }

                if (this.currentDataType === 'text') {
                    this.processText(input);
                }
            }

            processText(input) {
                try {
                    this.showInputProgress();
                    
                    // Validate input based on mode
                    if (this.currentMode === 'decode' && !this.isValidBase64(input)) {
                        this.showError('Invalid Base64 format');
                        this.hideInputProgress();
                        return;
                    }

                    let output;
                    if (this.currentMode === 'encode') {
                        output = btoa(unescape(encodeURIComponent(input)));
                        this.showValidation(this.inputValidation, 'Valid text input', 'text-green-600 dark:text-green-400');
                    } else {
                        output = decodeURIComponent(escape(atob(input)));
                        this.showValidation(this.inputValidation, 'Valid Base64 input', 'text-green-600 dark:text-green-400');
                    }

                    // Simulate processing time for smooth UX
                    setTimeout(() => {
                        this.outputArea.value = output;
                        this.hideInputProgress();
                        this.showSuccess('Conversion completed successfully');
                        this.updateCharacterCounts();
                        this.updateStatistics();
                    }, 200);

                } catch (error) {
                    this.hideInputProgress();
                    this.showError(`Conversion error: ${error.message}`);
                    this.showValidation(this.inputValidation, 'Invalid input format', 'text-red-600 dark:text-red-400');
                }
            }

            handleFileSelect(file) {
                if (!file) return;

                this.selectedFile = file;
                this.fileName.textContent = file.name;
                this.fileSize.textContent = this.formatFileSize(file.size);
                this.uploadContent.classList.add('hidden');
                this.filePreview.classList.remove('hidden');

                // Process file immediately
                this.processFile();
            }

            processFile() {
                if (!this.selectedFile) return;

                this.showFileProgress();
                const reader = new FileReader();

                if (this.currentMode === 'encode') {
                    reader.onload = (e) => {
                        this.updateProgressBar(50);
                        setTimeout(() => {
                            const arrayBuffer = e.target.result;
                            const bytes = new Uint8Array(arrayBuffer);
                            let binary = '';
                            for (let i = 0; i < bytes.byteLength; i++) {
                                binary += String.fromCharCode(bytes[i]);
                            }
                            this.outputArea.value = btoa(binary);
                            this.updateProgressBar(100);
                            setTimeout(() => {
                                this.hideFileProgress();
                                this.showSuccess(`File "${this.selectedFile.name}" encoded successfully`);
                                this.updateStatistics();
                            }, 500);
                        }, 300);
                    };
                    reader.readAsArrayBuffer(this.selectedFile);
                } else {
                    reader.onload = (e) => {
                        try {
                            this.updateProgressBar(50);
                            const base64 = e.target.result.trim();
                            
                            if (!this.isValidBase64(base64)) {
                                throw new Error('Invalid Base64 format in file');
                            }

                            const binary = atob(base64);
                            const bytes = new Uint8Array(binary.length);
                            for (let i = 0; i < binary.length; i++) {
                                bytes[i] = binary.charCodeAt(i);
                            }

                            this.updateProgressBar(100);
                            setTimeout(() => {
                                const blob = new Blob([bytes]);
                                this.downloadBlob(blob, `decoded_${this.selectedFile.name}`);
                                this.outputArea.value = `File decoded and downloaded as: decoded_${this.selectedFile.name}`;
                                this.hideFileProgress();
                                this.showSuccess('File decoded and download started');
                            }, 500);

                        } catch (error) {
                            this.hideFileProgress();
                            this.showError(`File decode error: ${error.message}`);
                        }
                    };
                    reader.readAsText(this.selectedFile);
                }
            }

            downloadBlob(blob, filename) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            handleDragOver(e) {
                e.preventDefault();
                this.dropArea.classList.add('drag-over');
            }

            handleDragLeave(e) {
                e.preventDefault();
                this.dropArea.classList.remove('drag-over');
            }

            handleDrop(e) {
                e.preventDefault();
                this.dropArea.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    this.handleFileSelect(files[0]);
                }
            }

            async pasteText() {
                try {
                    const text = await navigator.clipboard.readText();
                    this.textInput.value = text;
                    this.handleTextInput();
                    this.showSuccess('Text pasted successfully');
                } catch (err) {
                    this.showError('Failed to read clipboard. Please paste manually.');
                }
            }

            async copyOutput() {
                if (!this.outputArea.value) {
                    this.showError('No output to copy');
                    return;
                }

                try {
                    await navigator.clipboard.writeText(this.outputArea.value);
                    
                    // Visual feedback
                    const originalText = this.copyBtn.querySelector('span').textContent;
                    const span = this.copyBtn.querySelector('span');
                    span.textContent = 'Copied!';
                    this.copyBtn.classList.add('success-animation');
                    
                    setTimeout(() => {
                        span.textContent = originalText;
                        this.copyBtn.classList.remove('success-animation');
                    }, 2000);
                    
                    this.showSuccess('Output copied to clipboard');
                } catch (err) {
                    this.showError('Failed to copy to clipboard');
                }
            }

            clearInput() {
                this.textInput.value = '';
                this.updateCharacterCounts();
                this.updateStatistics();
                this.hideMessages();
                this.hideValidation(this.inputValidation);
            }

            clearOutput() {
                this.outputArea.value = '';
                this.updateCharacterCounts();
                this.updateStatistics();
                this.hideValidation(this.outputValidation);
            }

            clearFile() {
                this.selectedFile = null;
                this.fileInput.value = '';
                this.uploadContent.classList.remove('hidden');
                this.filePreview.classList.add('hidden');
                this.hideFileProgress();
                this.clearOutput();
            }

            updateCharacterCounts() {
                const inputChars = this.textInput.value.length;
                const outputChars = this.outputArea.value.length;
                
                this.inputCharCount.textContent = `${inputChars} characters`;
                this.outputCharCount.textContent = `${outputChars} characters`;
            }

            updateStatistics() {
                const input = this.textInput.value;
                const output = this.outputArea.value;
                
                if (input || output) {
                    this.statsContainer.classList.remove('hidden');
                    
                    this.inputChars.textContent = input.length.toLocaleString();
                    this.outputChars.textContent = output.length.toLocaleString();
                    
                    const inputBytes = new Blob([input]).size;
                    const outputBytes = new Blob([output]).size;
                    
                    this.dataSize.textContent = this.formatFileSize(Math.max(inputBytes, outputBytes));
                    
                    let efficiency = 100;
                    if (this.currentMode === 'encode' && input && output) {
                        efficiency = Math.round((inputBytes / outputBytes) * 100);
                    } else if (this.currentMode === 'decode' && input && output) {
                        efficiency = Math.round((outputBytes / inputBytes) * 100);
                    }
                    
                    this.efficiency.textContent = `${efficiency}%`;
                } else {
                    this.statsContainer.classList.add('hidden');
                }
            }

            isValidBase64(str) {
                try {
                    return btoa(atob(str)) === str;
                } catch (err) {
                    return false;
                }
            }

            formatFileSize(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;
            }

            showInputProgress() {
                this.inputProgress.classList.remove('hidden');
                // Show output skeleton while processing
                const outputSkeleton = document.getElementById('outputSkeleton');
                if (outputSkeleton) {
                    outputSkeleton.classList.remove('hidden');
                    this.outputArea.style.opacity = '0.3';
                }
            }

            hideInputProgress() {
                this.inputProgress.classList.add('hidden');
                // Hide output skeleton when processing complete
                const outputSkeleton = document.getElementById('outputSkeleton');
                if (outputSkeleton) {
                    outputSkeleton.classList.add('hidden');
                    this.outputArea.style.opacity = '1';
                }
            }

            showFileProgress() {
                this.fileProgress.classList.remove('hidden');
                this.updateProgressBar(0);
            }

            hideFileProgress() {
                this.fileProgress.classList.add('hidden');
            }

            updateProgressBar(percentage) {
                this.progressBar.style.width = `${percentage}%`;
            }

            showValidation(element, message, className) {
                element.textContent = message;
                element.className = `text-xs ${className}`;
                element.classList.remove('hidden');
            }

            hideValidation(element) {
                element.classList.add('hidden');
            }

            showError(message) {
                this.hideMessages();
                this.errorText.textContent = message;
                this.errorMessage.classList.remove('hidden');
                this.messageArea.classList.remove('hidden');
                this.errorMessage.classList.add('error-shake');
                
                setTimeout(() => {
                    this.errorMessage.classList.remove('error-shake');
                }, 500);
                
                setTimeout(() => this.hideMessages(), 5000);
            }

            showSuccess(message) {
                this.hideMessages();
                this.successText.textContent = message;
                this.successMessage.classList.remove('hidden');
                this.messageArea.classList.remove('hidden');
                this.successMessage.classList.add('success-animation');
                
                setTimeout(() => {
                    this.successMessage.classList.remove('success-animation');
                }, 600);
                
                setTimeout(() => this.hideMessages(), 3000);
            }

            hideMessages() {
                this.messageArea.classList.add('hidden');
                this.errorMessage.classList.add('hidden');
                this.successMessage.classList.add('hidden');
            }
        }

        // Initialize Base64 Converter when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new Base64Converter();
        });
    </script>
</body>
</html>